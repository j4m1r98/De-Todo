<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streaming Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #0e0e10;
            color: #efeff1;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar de canales */
        .channels-sidebar {
            width: 240px;
            background-color: #1f1f23;
            padding: 10px;
            overflow-y: auto;
            height: 100vh;
            transition: width 0.3s;
        }

        .channels-sidebar h2 {
            padding: 10px;
            font-size: 18px;
            border-bottom: 1px solid #343437;
            margin-bottom: 15px;
        }

        .channel-item {
            display: flex;
            align-items: center;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 5px;
            transition: background-color 0.2s;
        }

        .channel-item:hover {
            background-color: #26262c;
        }

        .channel-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
            background-color: #9147ff;
        }

        .channel-info {
            flex: 1;
        }

        .channel-name {
            font-weight: 600;
            font-size: 14px;
        }

        .channel-game {
            font-size: 12px;
            color: #adadb8;
        }

        .channel-viewers {
            font-size: 12px;
            color: #adadb8;
        }

        /* Contenido principal */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow: hidden;
            transition: margin-right 0.3s;
        }

        .video-container {
            position: relative;
            width: 100%;
            background-color: #000;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        video {
            width: 100%;
            height: auto;
            display: block;
        }

        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .control-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
            margin: 0 5px;
            min-width: 40px;
            min-height: 40px;
        }

        .channel-info-bar {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .channel-avatar-large {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-right: 15px;
            background-color: #9147ff;
        }

        .channel-details {
            flex: 1;
        }

        .channel-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .channel-stream-info {
            display: flex;
            align-items: center;
            font-size: 14px;
            color: #adadb8;
        }

        .viewers-count {
            display: flex;
            align-items: center;
            margin-right: 15px;
        }

        .live-indicator {
            width: 8px;
            height: 8px;
            background-color: #e91916;
            border-radius: 50%;
            margin-right: 5px;
        }

        /* Chat */
        .chat-sidebar {
            width: 340px;
            background-color: #1f1f23;
            display: flex;
            flex-direction: column;
            height: 100vh;
            transition: transform 0.3s, width 0.3s;
        }

        .chat-header {
            padding: 15px;
            border-bottom: 1px solid #343437;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-title {
            font-weight: 600;
        }

        .toggle-chat-btn {
            background: none;
            border: none;
            color: #efeff1;
            cursor: pointer;
            font-size: 18px;
            min-width: 40px;
            min-height: 40px;
        }

        .chat-messages {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
        }

        .chat-message {
            margin-bottom: 10px;
            padding: 5px;
            border-radius: 4px;
        }

        .message-user {
            font-weight: 600;
            color: #9147ff;
        }

        .chat-input-container {
            padding: 10px;
            border-top: 1px solid #343437;
        }

        .chat-input {
            width: 100%;
            background-color: #26262c;
            border: 1px solid #343437;
            border-radius: 4px;
            padding: 10px;
            color: #efeff1;
        }

        /* Estados de pantalla completa - CORREGIDOS */
        .fullscreen-mode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1000;
            background-color: #000;
            display: flex;
        }

        .fullscreen-mode .main-content {
            flex: 1;
            padding: 0;
            margin-right: 0;
            display: flex;
            flex-direction: column;
            width: calc(100vw - 340px);
            transition: width 0.3s;
        }

        /* CORRECCI√ìN: Cuando el chat est√° oculto, el main-content ocupa toda la pantalla */
        .fullscreen-mode.hide-chat .main-content {
            width: 100vw;
        }

        .fullscreen-mode .video-container {
            flex: 1;
            margin: 0;
            border-radius: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .fullscreen-mode video {
            height: 100%;
            width: 100%;
            object-fit: contain;
        }

        .fullscreen-mode .chat-sidebar {
            width: 340px;
            height: 100vh;
            transition: transform 0.3s, width 0.3s;
        }

        /* CORRECCI√ìN: Cuando el chat est√° oculto, se oculta completamente sin ocupar espacio */
        .fullscreen-mode.hide-chat .chat-sidebar {
            transform: translateX(100%);
            width: 0;
        }

        .fullscreen-mode .channels-sidebar {
            display: none;
        }

        .fullscreen-mode .channel-info-bar {
            display: none;
        }

        .fullscreen-mode .video-controls {
            z-index: 1002;
        }

        /* Estados del chat oculto en modo normal */
        body.hide-chat-normal .chat-sidebar {
            transform: translateX(100%);
        }

        body.hide-chat-normal .main-content {
            margin-right: 0;
        }

        /* Bot√≥n para mostrar chat en pantalla completa */
        .show-chat-btn {
            position: fixed;
            right: 20px;
            top: 20px;
            background-color: #9147ff;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 10px 15px;
            cursor: pointer;
            z-index: 1003;
            display: none;
            min-width: 120px;
            min-height: 40px;
        }

        .fullscreen-mode.hide-chat .show-chat-btn {
            display: block;
        }

        /* Bot√≥n para mostrar chat en modo normal */
        .show-chat-normal-btn {
            position: fixed;
            right: 20px;
            bottom: 20px;
            background-color: #9147ff;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 10px 15px;
            cursor: pointer;
            z-index: 1003;
            display: none;
            min-width: 120px;
            min-height: 40px;
        }

        body.hide-chat-normal .show-chat-normal-btn {
            display: block;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .chat-sidebar {
                width: 300px;
            }
            
            .fullscreen-mode .main-content {
                width: calc(100vw - 300px);
            }
        }

        @media (max-width: 900px) {
            .channels-sidebar {
                width: 70px;
            }
            
            .channel-info, .channel-game, .channel-viewers {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar de canales -->
    <div class="channels-sidebar">
        <h2>Canales en vivo</h2>
        <div class="channel-list">
            <!-- Los canales se generar√°n con JavaScript -->
        </div>
    </div>

    <!-- Contenido principal -->
    <div class="main-content">
        <div class="video-container">
            <video id="stream-video" controls>
                <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
                Tu navegador no soporta el elemento de video.
            </video>
            <div class="video-controls">
                <div>
                    <button class="control-btn" id="play-pause">‚è∏Ô∏è</button>
                    <button class="control-btn" id="mute">üîä</button>
                </div>
                <button class="control-btn" id="fullscreen">‚õ∂</button>
            </div>
        </div>

        <div class="channel-info-bar">
            <div class="channel-avatar-large"></div>
            <div class="channel-details">
                <div class="channel-title">¬°Jugando Valorant con viewers! üî•</div>
                <div class="channel-stream-info">
                    <div class="viewers-count">
                        <span class="live-indicator"></span>
                        <span id="viewers-count">1,245</span> espectadores
                    </div>
                    <div class="stream-category">Valorant</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat -->
    <div class="chat-sidebar">
        <div class="chat-header">
            <div class="chat-title">Chat de la transmisi√≥n</div>
            <button class="toggle-chat-btn" id="toggle-chat">‚óÄ</button>
        </div>
        <div class="chat-messages" id="chat-messages">
            <!-- Los mensajes se generar√°n con JavaScript -->
        </div>
        <div class="chat-input-container">
            <input type="text" class="chat-input" placeholder="Enviar un mensaje..." id="chat-input">
        </div>
    </div>

    <!-- Bot√≥n para mostrar chat en pantalla completa -->
    <button class="show-chat-btn" id="show-chat">Mostrar Chat</button>

    <!-- Bot√≥n para mostrar chat en modo normal -->
    <button class="show-chat-normal-btn" id="show-chat-normal">Mostrar Chat</button>

    <script>
        // Datos simulados
        const channels = [
            { name: "StreamerPro", game: "Valorant", viewers: "1.2k", avatarColor: "#9147ff" },
            { name: "GamerGirl", game: "Just Chatting", viewers: "3.4k", avatarColor: "#ff69b4" },
            { name: "EliteGamer", game: "Fortnite", viewers: "856", avatarColor: "#00bfff" },
            { name: "TechMaster", game: "Minecraft", viewers: "2.1k", avatarColor: "#32cd32" },
            { name: "SpeedRunner", game: "Super Mario Odyssey", viewers: "521", avatarColor: "#ff4500" },
            { name: "ArtStream", game: "Art", viewers: "789", avatarColor: "#ffd700" },
            { name: "MusicLover", game: "Music", viewers: "1.5k", avatarColor: "#8a2be2" },
            { name: "CookingShow", game: "Cooking", viewers: "932", avatarColor: "#ff6347" }
        ];

        const chatMessages = [
            { user: "Viewer1", message: "¬°Gran jugada!" },
            { user: "StreamFan", message: "¬øCu√°ndo empieza el torneo?" },
            { user: "GamerPro", message: "Ese headshot fue incre√≠ble" },
            { user: "NewViewer", message: "Hola a todos, acabo de llegar" },
            { user: "ChatMod", message: "Por favor mantengan el chat respetuoso" },
            { user: "Subscriber", message: "¬°Me encanta este stream!" },
            { user: "GamerGirl", message: "¬øAlguien m√°s juega Valorant?" },
            { user: "TechMaster", message: "El setup del streamer es incre√≠ble" }
        ];

        // Elementos DOM
        const channelList = document.querySelector('.channel-list');
        const chatMessagesContainer = document.getElementById('chat-messages');
        const video = document.getElementById('stream-video');
        const fullscreenBtn = document.getElementById('fullscreen');
        const toggleChatBtn = document.getElementById('toggle-chat');
        const showChatBtn = document.getElementById('show-chat');
        const showChatNormalBtn = document.getElementById('show-chat-normal');
        const playPauseBtn = document.getElementById('play-pause');
        const muteBtn = document.getElementById('mute');
        const chatInput = document.getElementById('chat-input');
        const viewersCount = document.getElementById('viewers-count');

        // Variables de estado
        let isFullscreen = false;
        let isChatHidden = false;

        // Generar canales
        channels.forEach(channel => {
            const channelItem = document.createElement('div');
            channelItem.className = 'channel-item';
            channelItem.innerHTML = `
                <div class="channel-avatar" style="background-color: ${channel.avatarColor};"></div>
                <div class="channel-info">
                    <div class="channel-name">${channel.name}</div>
                    <div class="channel-game">${channel.game}</div>
                </div>
                <div class="channel-viewers">${channel.viewers}</div>
            `;
            channelList.appendChild(channelItem);
        });

        // Generar mensajes del chat
        function addChatMessage(user, message) {
            const messageElement = document.createElement('div');
            messageElement.className = 'chat-message';
            messageElement.innerHTML = `
                <span class="message-user">${user}:</span> ${message}
            `;
            chatMessagesContainer.appendChild(messageElement);
            chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;
        }

        // Cargar mensajes iniciales
        chatMessages.forEach(msg => {
            addChatMessage(msg.user, msg.message);
        });

        // Simular nuevos mensajes del chat
        setInterval(() => {
            const users = ['Viewer123', 'GamerFan', 'StreamLover', 'NewSub', 'ChatMember'];
            const messages = [
                '¬°Incre√≠ble!',
                '¬øAlguien m√°s est√° emocionado?',
                'Gran contenido como siempre',
                '¬øQu√© configuraci√≥n usas?',
                '¬°Felicidades por los 1000 seguidores!',
                '¬øPuedes explicar esa estrategia?',
                'El chat est√° muy activo hoy',
                'Me encanta esta comunidad'
            ];
            
            const randomUser = users[Math.floor(Math.random() * users.length)];
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            
            addChatMessage(randomUser, randomMessage);
        }, 5000);

        // Simular cambio de viewers
        setInterval(() => {
            const currentViewers = parseInt(viewersCount.textContent.replace(/,/g, ''));
            const change = Math.floor(Math.random() * 50) - 25; // Cambio entre -25 y +25
            const newViewers = Math.max(100, currentViewers + change);
            viewersCount.textContent = newViewers.toLocaleString();
        }, 10000);

        // Funcionalidad de pantalla completa compatible con Tizen
        fullscreenBtn.addEventListener('click', toggleFullscreen);

        function toggleFullscreen() {
            if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.mozFullScreenElement) {
                // Entrar en pantalla completa
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen();
                } else if (document.documentElement.webkitRequestFullscreen) {
                    document.documentElement.webkitRequestFullscreen();
                } else if (document.documentElement.mozRequestFullScreen) {
                    document.documentElement.mozRequestFullScreen();
                }
            } else {
                // Salir de pantalla completa
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                }
            }
        }

        // Manejar cambios en el estado de pantalla completa
        function handleFullscreenChange() {
            if (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement) {
                document.body.classList.add('fullscreen-mode');
                isFullscreen = true;
                // Mantener el estado del chat al entrar en pantalla completa
                if (document.body.classList.contains('hide-chat-normal')) {
                    document.body.classList.add('hide-chat');
                }
            } else {
                document.body.classList.remove('fullscreen-mode');
                document.body.classList.remove('hide-chat');
                isFullscreen = false;
                isChatHidden = false;
                
                // Restaurar el estado del chat en modo normal
                if (document.body.classList.contains('hide-chat-normal')) {
                    toggleChatBtn.textContent = '‚ñ∂';
                } else {
                    toggleChatBtn.textContent = '‚óÄ';
                }
            }
        }

        // Escuchar eventos de cambio de pantalla completa
        document.addEventListener('fullscreenchange', handleFullscreenChange);
        document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
        document.addEventListener('mozfullscreenchange', handleFullscreenChange);

        // Ocultar/mostrar chat (funciona en ambos modos)
        toggleChatBtn.addEventListener('click', () => {
            if (isFullscreen) {
                isChatHidden = !isChatHidden;
                document.body.classList.toggle('hide-chat', isChatHidden);
                toggleChatBtn.textContent = isChatHidden ? '‚ñ∂' : '‚óÄ';
            } else {
                // Modo normal
                document.body.classList.toggle('hide-chat-normal');
                toggleChatBtn.textContent = document.body.classList.contains('hide-chat-normal') ? '‚ñ∂' : '‚óÄ';
            }
        });

        // Mostrar chat cuando est√° oculto en pantalla completa
        showChatBtn.addEventListener('click', () => {
            if (isFullscreen && isChatHidden) {
                isChatHidden = false;
                document.body.classList.remove('hide-chat');
                toggleChatBtn.textContent = '‚óÄ';
            }
        });

        // Mostrar chat cuando est√° oculto en modo normal
        showChatNormalBtn.addEventListener('click', () => {
            document.body.classList.remove('hide-chat-normal');
            toggleChatBtn.textContent = '‚óÄ';
        });

        // Control de reproducci√≥n
        playPauseBtn.addEventListener('click', () => {
            if (video.paused) {
                video.play();
                playPauseBtn.textContent = '‚è∏Ô∏è';
            } else {
                video.pause();
                playPauseBtn.textContent = '‚ñ∂Ô∏è';
            }
        });

        // Control de volumen
        muteBtn.addEventListener('click', () => {
            if (video.muted) {
                video.muted = false;
                muteBtn.textContent = 'üîä';
            } else {
                video.muted = true;
                muteBtn.textContent = 'üîá';
            }
        });

        // Enviar mensaje al chat
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && chatInput.value.trim() !== '') {
                addChatMessage('T√∫', chatInput.value);
                chatInput.value = '';
                
                // Simular respuesta despu√©s de un tiempo
                setTimeout(() => {
                    const responses = [
                        '¬°Gracias por el mensaje!',
                        'Esa es una buena pregunta',
                        '¬°Me alegra verte en el chat!',
                        'Voy a responder eso en un momento'
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addChatMessage('StreamerPro', randomResponse);
                }, 2000);
            }
        });

        // Ajustar el video cuando cambia el tama√±o de la ventana
        window.addEventListener('resize', () => {
            if (isFullscreen) {
                // Reajustar el video para mantener el centrado
                video.style.maxHeight = '100vh';
                video.style.width = 'auto';
                video.style.maxWidth = '100%';
            }
        });
    </script>
</body>
</html>
